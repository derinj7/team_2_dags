name: Notify astro-project on push
on:
  push:
    branches: [ main ]
jobs:
  dispatch:
    runs-on: ubuntu-latest
    steps:
      - uses: peter-evans/repository-dispatch@v3
        with:
          token: ${{ secrets.ASTRO_SYNC_TOKEN }}
          repository: derinj7/astro-project
          event-type: deploy_request
          client-payload: '{ "source": "${{ github.repository }}", "sha": "${{ github.sha }}" }'